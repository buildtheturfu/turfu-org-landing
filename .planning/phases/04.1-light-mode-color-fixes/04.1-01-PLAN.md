---
phase: 04.1-light-mode-color-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - tailwind.config.ts
autonomous: true

must_haves:
  truths:
    - "CSS variables exist for surface, text, border, and overlay colors"
    - "Tailwind semantic classes available: text-foreground, bg-surface, border-border, bg-overlay"
    - "Light mode values provide WCAG AA contrast on #fafafa background"
    - "Dark mode values maintain existing appearance"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Semantic CSS variables for both themes"
      contains: "--surface"
    - path: "tailwind.config.ts"
      provides: "Semantic color mappings"
      contains: "surface:"
  key_links:
    - from: "tailwind.config.ts"
      to: "globals.css"
      via: "var(--surface) references"
      pattern: "var\\(--"
---

<objective>
Extend CSS variables and Tailwind config with semantic color tokens for theme-aware styling.

Purpose: Create the foundation for replacing hardcoded dark-mode colors. All subsequent plans depend on these semantic tokens being available.
Output: Extended globals.css with surface/text/border/overlay variables, tailwind.config.ts with semantic color mappings.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04.1-light-mode-color-fixes/04.1-RESEARCH.md
@src/app/globals.css
@tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend CSS variables in globals.css</name>
  <files>src/app/globals.css</files>
  <action>
Add new CSS variables to the existing :root and .dark blocks in globals.css. Preserve all existing variables and styles.

Add to :root (light mode):
```css
/* Surfaces */
--surface: #ffffff;
--surface-elevated: #f4f4f5;
--surface-muted: #e4e4e7;

/* Text */
--text-primary: #0a0a0a;
--text-secondary: #52525b;
--text-muted: #71717a;

/* Borders */
--border: #d4d4d8;
--border-muted: #e4e4e7;

/* Overlays */
--overlay: rgba(0, 0, 0, 0.05);
--overlay-hover: rgba(0, 0, 0, 0.08);
```

Add to .dark block:
```css
/* Surfaces */
--surface: #0a0a0a;
--surface-elevated: #18181b;
--surface-muted: #27272a;

/* Text */
--text-primary: #fafafa;
--text-secondary: #a1a1aa;
--text-muted: #71717a;

/* Borders */
--border: #3f3f46;
--border-muted: #27272a;

/* Overlays */
--overlay: rgba(255, 255, 255, 0.05);
--overlay-hover: rgba(255, 255, 255, 0.10);
```

Also update .btn-secondary to use semantic classes:
- Change `border-white/20 hover:border-white/40` to `border-[var(--border)] hover:border-[var(--foreground)]/40`
- Change `text-white` to `text-[var(--foreground)]`
- Change `hover:bg-white/5` to `hover:bg-[var(--overlay)]`
- Change `focus:ring-white/50` to `focus:ring-[var(--foreground)]/50`

Keep .btn-primary unchanged (gradient backgrounds need white text for contrast).
  </action>
  <verify>
Run `grep -E "(--surface|--text-primary|--border:|--overlay:)" src/app/globals.css` to confirm variables exist in both :root and .dark.
Run `grep "btn-secondary" src/app/globals.css` to verify updated button styles.
  </verify>
  <done>
- globals.css contains 10 new CSS variables (5 in :root, 5 in .dark for each category)
- .btn-secondary uses semantic variable references
- Existing --background and --foreground variables unchanged
  </done>
</task>

<task type="auto">
  <name>Task 2: Add semantic color mappings to Tailwind config</name>
  <files>tailwind.config.ts</files>
  <action>
Extend the colors object in tailwind.config.ts to add semantic color mappings that reference the new CSS variables.

Add these entries inside theme.extend.colors (alongside existing turfu colors):

```typescript
surface: {
  DEFAULT: 'var(--surface)',
  elevated: 'var(--surface-elevated)',
  muted: 'var(--surface-muted)',
},
foreground: {
  DEFAULT: 'var(--foreground)',
  secondary: 'var(--text-secondary)',
  muted: 'var(--text-muted)',
},
border: {
  DEFAULT: 'var(--border)',
  muted: 'var(--border-muted)',
},
overlay: {
  DEFAULT: 'var(--overlay)',
  hover: 'var(--overlay-hover)',
},
```

This enables Tailwind classes like:
- text-foreground, text-foreground-secondary, text-foreground-muted
- bg-surface, bg-surface-elevated, bg-surface-muted
- border-border, border-border-muted
- bg-overlay, bg-overlay-hover

Keep all existing turfu.* colors for backwards compatibility.
  </action>
  <verify>
Run `grep -E "(surface:|foreground:|border:|overlay:)" tailwind.config.ts` to confirm all four semantic groups added.
Run `npm run build` to verify Tailwind compiles without errors.
  </verify>
  <done>
- tailwind.config.ts has surface, foreground, border, overlay color groups
- All map to CSS variable references
- Build succeeds with new config
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run build` succeeds without errors
2. CSS variables exist in compiled output
3. Tailwind recognizes new color classes (check build output for unused class warnings)
</verification>

<success_criteria>
- 10 new CSS variables defined (surface, text, border, overlay variants)
- Tailwind config extended with 4 semantic color groups
- .btn-secondary converted to use semantic tokens
- Build passes, ready for component migration in subsequent plans
</success_criteria>

<output>
After completion, create `.planning/phases/04.1-light-mode-color-fixes/04.1-01-SUMMARY.md`
</output>
